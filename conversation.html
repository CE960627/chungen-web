<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯¦ç”¨ç”Ÿæ´»è‹±æ–‡ | Daily Conversation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #FFFFFF;
            color: #1F2937;
            -webkit-font-smoothing: antialiased;
        }
        
        /* Enforce English Font for sentences to fix apostrophe spacing */
        .en-font {
            font-family: 'Inter', sans-serif;
        }

        /* Hide Scrollbar but keep functionality */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-shadow:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transform: translateY(-2px);
        }

        /* Sidebar active state */
        .category-btn.active {
            background-color: #EEF2FF;
            color: #4F46E5;
            border-right: 3px solid #4F46E5;
        }
    </style>
</head>
<body class="bg-gray-50 flex flex-col h-screen overflow-hidden">

    <nav class="bg-gray-900 text-white shadow-lg z-[60] flex-shrink-0">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0 font-bold text-xl tracking-wider">
                    <a href="index.html" class="text-white hover:text-yellow-400 transition flex items-center gap-2">
                        <span class="text-2xl">ğŸ“</span> Chungen English
                    </a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="index.html" class="text-gray-300 hover:text-white hover:bg-gray-700 px-3 py-2 rounded-md text-sm font-medium transition">å­¸æ¸¬è‹±æ–‡æŒ‡å¼•</a>
                        <a href="vocab.html" class="text-gray-300 hover:text-white hover:bg-gray-700 px-3 py-2 rounded-md text-sm font-medium transition">æ­·å±†é«˜é »å–®å­—ç¥å™¨</a>
                        <a href="conversation.html" class="bg-gray-800 text-yellow-400 px-3 py-2 rounded-md text-sm font-bold border border-gray-700">å¯¦ç”¨ç”Ÿæ´»è‹±æ–‡</a>
                        <a href="tutoring.html" class="text-gray-300 hover:text-white hover:bg-gray-700 px-3 py-2 rounded-md text-sm font-medium transition">é—œæ–¼æˆ‘ / å®¶æ•™èª²ç¨‹</a>
                    </div>
                </div>
                <div class="md:hidden flex items-center">
                    <button onclick="document.getElementById('mobile-menu').classList.toggle('hidden')" class="text-gray-300 hover:text-white focus:outline-none p-2">
                        â˜°
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-gray-800 border-t border-gray-700">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="index.html" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">å­¸æ¸¬è‹±æ–‡æŒ‡å¼•</a>
                <a href="vocab.html" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">æ­·å±†é«˜é »å–®å­—ç¥å™¨</a>
                <a href="conversation.html" class="text-yellow-400 block px-3 py-2 rounded-md text-base font-bold bg-gray-900">å¯¦ç”¨ç”Ÿæ´»è‹±æ–‡</a>
                <a href="tutoring.html" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">é—œæ–¼æˆ‘ / å®¶æ•™èª²ç¨‹</a>
            </div>
        </div>
    </nav>

    <div class="flex flex-1 overflow-hidden">
        
        <aside class="w-64 bg-white border-r border-gray-200 flex-shrink-0 flex flex-col hidden md:flex">
            <div class="p-6 border-b border-gray-100">
                <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                    <i class="ph-duotone ph-chats-circle text-indigo-600"></i>
                    æƒ…å¢ƒä¸»é¡Œ
                </h2>
                <p class="text-xs text-gray-500 mt-1">Select a scenario to practice</p>
            </div>
            <div class="flex-1 overflow-y-auto no-scrollbar p-3 space-y-1" id="category-list">
                </div>
            
            <div class="p-4 border-t border-gray-100 bg-gray-50">
                <button onclick="copyScenePrompt(this)" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-lg text-sm font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-sm">
                    <i class="ph-bold ph-robot"></i> è¤‡è£½ AI è§’è‰²è¨­å®š
                </button>
                <p class="text-[10px] text-gray-400 mt-2 text-center">è²¼çµ¦ ChatGPT å³å¯é–‹å§‹å°è©±ç·´ç¿’</p>
            </div>
        </aside>

        <div class="md:hidden absolute top-20 left-4 z-40">
            <button onclick="document.querySelector('aside').classList.toggle('hidden');" class="bg-white p-2 rounded-md shadow-md border text-gray-600">
                <i class="ph-bold ph-list"></i> ä¸»é¡Œ
            </button>
        </div>

        <main class="flex-1 flex flex-col h-full bg-gray-50 overflow-hidden relative">
            
            <header class="bg-white border-b border-gray-200 px-8 py-5 flex justify-between items-center shadow-sm flex-shrink-0">
                <div>
                    <h1 id="current-title" class="text-2xl font-bold text-gray-900 flex items-center gap-2">
                        </h1>
                    <p id="current-desc" class="text-sm text-gray-500 mt-1">
                        </p>
                </div>
                <div class="flex gap-3">
                    <button onclick="generateImage()" class="flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition text-sm font-medium shadow-sm">
                        <i class="ph-bold ph-download-simple"></i> ä¸‹è¼‰åœ–å¡
                    </button>
                </div>
            </header>

            <div class="flex-1 overflow-y-auto p-4 md:p-8" id="capture-area">
                <div id="cards-container" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 max-w-7xl mx-auto pb-20">
                    </div>
            </div>

        </main>
    </div>

    <script>
        // --- Data ---
        const categorySettings = {
            "dating": {
                icon: "ph-heart",
                label: "Dating & Romance",
                title: "ç´„æœƒèˆ‡æˆ€æ„›",
                desc: "å¾æ­è¨•ã€ç¨±è®šåˆ°è¡¨é”å¥½æ„Ÿçš„é“åœ°ç”¨èªã€‚",
                prompt: "ä½ ç¾åœ¨æ˜¯ä¸€å€‹è‹±æ–‡å£èªªæ•™ç·´ã€‚è«‹è·Ÿæˆ‘é€²è¡Œä¸€å ´é—œæ–¼ã€Œç´„æœƒ (Dating)ã€çš„è§’è‰²æ‰®æ¼”ç·´ç¿’ã€‚è«‹ä¿®æ­£æˆ‘çš„æ–‡æ³•éŒ¯èª¤ï¼Œä¸¦æä¾›æ›´é“åœ°çš„èªªæ³•ã€‚",
                sentences: [
                    { en: "I can't take my eyes off you.", ch: "æˆ‘çš„è¦–ç·šç„¡æ³•å¾ä½ èº«ä¸Šç§»é–‹ã€‚", tag: "Flirting" },
                    { en: "We really hit it off.", ch: "æˆ‘å€‘çœŸçš„å¾ˆåˆå¾—ä¾†ã€‚", tag: "Connection" },
                    { en: "I'm totally into you.", ch: "æˆ‘å®Œå…¨è¿·ä¸Šä½ äº†ã€‚", tag: "Confession" },
                    { en: "Do you believe in love at first sight?", ch: "ä½ ç›¸ä¿¡ä¸€è¦‹é¾æƒ…å—ï¼Ÿ", tag: "Icebreaker" },
                    { en: "You have a great smile.", ch: "ä½ çš„ç¬‘å®¹å¾ˆè¿·äººã€‚", tag: "Compliment" },
                    { en: "Are you seeing anyone lately?", ch: "ä½ æœ€è¿‘æœ‰äº¤å¾€å°è±¡å—ï¼Ÿ", tag: "Inquiry" },
                    { en: "I'd love to take you out for dinner.", ch: "æˆ‘æƒ³å¸¶ä½ å»åƒæ™šé¤ã€‚", tag: "Invitation" },
                    { en: "Let's split the bill.", ch: "æˆ‘å€‘å„ä»˜å„çš„å§ã€‚", tag: "Dining" },
                    { en: "She is playing hard to get.", ch: "å¥¹åœ¨æ¬²æ“’æ•…ç¸±ã€‚", tag: "Status" },
                    { en: "I think we should see other people.", ch: "æˆ‘æƒ³æˆ‘å€‘æ‡‰è©²åˆ†é–‹ï¼ˆå»è¦‹è¦‹åˆ¥äººï¼‰ã€‚", tag: "Breakup" }
                ]
            },
            "travel": {
                icon: "ph-airplane-tilt",
                label: "Travel & Airport",
                title: "æ—…éŠèˆ‡æ©Ÿå ´",
                desc: "æµ·é—œã€é£¯åº—å…¥ä½èˆ‡å•è·¯çš„å¿…å‚™å¥å‹ã€‚",
                prompt: "ä½ ç¾åœ¨æ˜¯ä¸€å€‹è‹±æ–‡å£èªªæ•™ç·´ã€‚è«‹è·Ÿæˆ‘é€²è¡Œä¸€å ´é—œæ–¼ã€Œæ—…éŠ (Travel)ã€çš„è§’è‰²æ‰®æ¼”ç·´ç¿’ã€‚",
                sentences: [
                    { en: "I have nothing to declare.", ch: "æˆ‘æ²’æœ‰æ±è¥¿è¦ç”³å ±ã€‚", tag: "Customs" },
                    { en: "Could I have an aisle seat, please?", ch: "è«‹å•å¯ä»¥çµ¦æˆ‘é èµ°é“çš„ä½å­å—ï¼Ÿ", tag: "Flight" },
                    { en: "Is there a free shuttle to the city center?", ch: "æœ‰å…è²»æ¥é§è»Šåˆ°å¸‚ä¸­å¿ƒå—ï¼Ÿ", tag: "Transport" },
                    { en: "I'd like to check in, please.", ch: "æˆ‘è¦è¾¦ç†å…¥ä½ã€‚", tag: "Hotel" },
                    { en: "Could you recommend some local spots?", ch: "å¯ä»¥æ¨è–¦ä¸€äº›åœ¨åœ°æ™¯é»å—ï¼Ÿ", tag: "Sightseeing" },
                    { en: "Do you have a map of the city?", ch: "ä½ æœ‰åŸå¸‚åœ°åœ–å—ï¼Ÿ", tag: "Info" },
                    { en: "How do I get to the train station?", ch: "è«‹å•ç«è»Šç«™æ€éº¼èµ°ï¼Ÿ", tag: "Direction" },
                    { en: "Can I leave my luggage here?", ch: "æˆ‘å¯ä»¥æŠŠè¡Œæå¯„æ”¾åœ¨é€™å—ï¼Ÿ", tag: "Service" }
                ]
            },
            "shopping": {
                icon: "ph-bag",
                label: "Shopping",
                title: "é€›è¡—è³¼ç‰©",
                desc: "æ®ºåƒ¹ã€é€€æ›è²¨èˆ‡å°‹æ‰¾å•†å“çš„å¯¦ç”¨å¥ã€‚",
                prompt: "ä½ ç¾åœ¨æ˜¯ä¸€å€‹è‹±æ–‡å£èªªæ•™ç·´ã€‚è«‹è·Ÿæˆ‘é€²è¡Œä¸€å ´é—œæ–¼ã€Œè³¼ç‰© (Shopping)ã€çš„è§’è‰²æ‰®æ¼”ç·´ç¿’ã€‚",
                sentences: [
                    { en: "Do you have this in a smaller size?", ch: "é€™ä»¶æœ‰å°ä¸€é»çš„å°ºå¯¸å—ï¼Ÿ", tag: "Size" },
                    { en: "It's a little out of my budget.", ch: "é€™æœ‰é»è¶…å‡ºæˆ‘çš„é ç®—ã€‚", tag: "Price" },
                    { en: "Can you give me a discount?", ch: "å¯ä»¥çµ¦æˆ‘ä¸€é»æŠ˜æ‰£å—ï¼Ÿ", tag: "Bargain" },
                    { en: "I'm just browsing, thanks.", ch: "æˆ‘åªæ˜¯çœ‹çœ‹ï¼Œè¬è¬ã€‚", tag: "Browsing" },
                    { en: "Is this on sale?", ch: "é€™ä»¶æœ‰ç‰¹åƒ¹å—ï¼Ÿ", tag: "Sale" },
                    { en: "I'd like to return this item.", ch: "æˆ‘æƒ³é€€é€™ä»¶å•†å“ã€‚", tag: "Return" },
                    { en: "Where is the fitting room?", ch: "è©¦è¡£é–“åœ¨å“ªè£¡ï¼Ÿ", tag: "Location" },
                    { en: "Do you take credit cards?", ch: "ä½ å€‘æ”¶ä¿¡ç”¨å¡å—ï¼Ÿ", tag: "Payment" }
                ]
            },
            "restaurant": {
                icon: "ph-fork-knife",
                label: "Restaurant",
                title: "é¤å»³é»é¤",
                desc: "è¨‚ä½ã€é»é¤èˆ‡ç‰¹æ®Šé£²é£Ÿéœ€æ±‚çš„è¡¨é”ã€‚",
                prompt: "ä½ ç¾åœ¨æ˜¯ä¸€å€‹è‹±æ–‡å£èªªæ•™ç·´ã€‚è«‹è·Ÿæˆ‘é€²è¡Œä¸€å ´é—œæ–¼ã€Œé¤å»³ (Restaurant)ã€çš„è§’è‰²æ‰®æ¼”ç·´ç¿’ã€‚",
                sentences: [
                    { en: "Table for two, please.", ch: "å…©ä½ï¼Œè¬è¬ã€‚", tag: "Seating" },
                    { en: "Could we see the menu?", ch: "æˆ‘å€‘å¯ä»¥çœ‹èœå–®å—ï¼Ÿ", tag: "Ordering" },
                    { en: "I'll have the steak, medium rare.", ch: "æˆ‘è¦ç‰›æ’ï¼Œä¸‰åˆ†ç†Ÿã€‚", tag: "Food" },
                    { en: "Does this dish contain nuts?", ch: "é€™é“èœæœ‰å«å …æœå—ï¼Ÿ", tag: "Allergy" },
                    { en: "Can I get this to go?", ch: "é€™å€‹å¯ä»¥å¤–å¸¶å—ï¼Ÿ", tag: "Takeout" },
                    { en: "Check, please.", ch: "éº»ç…©è²·å–®ã€‚", tag: "Bill" },
                    { en: "The service here is impeccable.", ch: "é€™è£¡çš„æœå‹™ç„¡æ‡ˆå¯æ“Šã€‚", tag: "Review" },
                    { en: "Is the tip included?", ch: "å°è²»æœ‰åŒ…å«åœ¨å…§å—ï¼Ÿ", tag: "Payment" }
                ]
            },
            "business": {
                icon: "ph-briefcase",
                label: "Business",
                title: "è·å ´å•†å‹™",
                desc: "æœƒè­°ã€ç°¡å ±èˆ‡è·å ´ç¤¾äº¤ç”¨èªã€‚",
                prompt: "ä½ ç¾åœ¨æ˜¯ä¸€å€‹è‹±æ–‡å£èªªæ•™ç·´ã€‚è«‹è·Ÿæˆ‘é€²è¡Œä¸€å ´é—œæ–¼ã€Œå•†å‹™ (Business)ã€çš„è§’è‰²æ‰®æ¼”ç·´ç¿’ã€‚",
                sentences: [
                    { en: "Let's get down to business.", ch: "æˆ‘å€‘è¨€æ­¸æ­£å‚³å§ã€‚", tag: "Meeting" },
                    { en: "I'd like to propose a new strategy.", ch: "æˆ‘æƒ³æå‡ºä¸€å€‹æ–°ç­–ç•¥ã€‚", tag: "Idea" },
                    { en: "Could you elaborate on that point?", ch: "ä½ å¯ä»¥è©³ç´°èªªæ˜é‚£ä¸€é»å—ï¼Ÿ", tag: "Clarify" },
                    { en: "We are on the same page.", ch: "æˆ‘å€‘çš„çœ‹æ³•ä¸€è‡´ã€‚", tag: "Agreement" },
                    { en: "I'll follow up with an email.", ch: "æˆ‘ç¨å¾Œæœƒç™¼ä¸€å°éƒµä»¶è·Ÿé€²ã€‚", tag: "Follow-up" },
                    { en: "What's the deadline for this project?", ch: "é€™å€‹å°ˆæ¡ˆçš„æˆªæ­¢æ—¥æœŸæ˜¯ä»€éº¼æ™‚å€™ï¼Ÿ", tag: "Schedule" },
                    { en: "Let's wrap up this meeting.", ch: "æˆ‘å€‘çµæŸé€™å ´æœƒè­°å§ã€‚", tag: "Closing" },
                    { en: "Thinking outside the box is crucial.", ch: "è·³è„«æ¡†æ¶æ€è€ƒå¾ˆé—œéµã€‚", tag: "Idiom" }
                ]
            }
        };

        let activeCategory = "dating"; // Default

        // --- Functions ---

        function renderNav() {
            const list = document.getElementById('category-list');
            list.innerHTML = '';
            
            Object.keys(categorySettings).forEach(key => {
                const item = categorySettings[key];
                const isActive = key === activeCategory;
                
                const btn = document.createElement('button');
                btn.className = `category-btn w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition-all ${isActive ? 'active font-bold' : 'text-gray-600 hover:bg-gray-50'}`;
                btn.onclick = () => switchCategory(key);
                btn.innerHTML = `
                    <i class="${isActive ? 'ph-duotone' : 'ph'} ${item.icon} text-xl ${isActive ? 'text-indigo-600' : 'text-gray-400'}"></i>
                    <span>${item.label}</span>
                `;
                list.appendChild(btn);
            });
        }

        function switchCategory(key) {
            activeCategory = key;
            renderNav();
            updateView();
        }

        function updateView() {
            const data = categorySettings[activeCategory];
            
            // Update Header
            document.getElementById('current-title').innerHTML = `
                <i class="ph-duotone ${data.icon} text-indigo-600"></i> ${data.title}
            `;
            document.getElementById('current-desc').textContent = data.desc;

            // Render Cards
            const container = document.getElementById('cards-container');
            container.innerHTML = '';

            data.sentences.forEach(s => {
                const card = document.createElement('div');
                card.className = "bg-white p-6 rounded-xl border border-gray-100 card-shadow relative group";
                card.innerHTML = `
                    <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
                        <button onclick="speak('${s.en.replace(/'/g, "\\'")}')" class="p-2 bg-indigo-50 text-indigo-600 rounded-full hover:bg-indigo-100 transition">
                            <i class="ph-bold ph-speaker-high"></i>
                        </button>
                    </div>
                    <span class="inline-block px-2 py-1 bg-gray-100 text-gray-500 text-xs font-bold rounded-md mb-3">
                        ${s.tag}
                    </span>
                    <h3 class="text-xl font-bold text-gray-800 mb-2 en-font leading-relaxed">${s.en}</h3>
                    <p class="text-gray-500 font-medium">${s.ch}</p>
                `;
                container.appendChild(card);
            });
        }

        function speak(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.9;
            window.speechSynthesis.speak(utterance);
        }

        function generateImage() {
            document.body.style.cursor = 'wait';
            const captureArea = document.getElementById('capture-area');
            
            html2canvas(captureArea, {
                scale: 2,
                backgroundColor: "#F9FAFB",
                onclone: (clonedDoc) => {
                    // Optional: Styling adjustments for the screenshot
                    const cards = clonedDoc.querySelectorAll('.card-shadow');
                    // Ensure full height capture if needed
                }
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `Daily_Conversation_${new Date().toISOString().slice(0,10)}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
                document.body.style.cursor = 'default';
            }).catch(err => {
                console.error("Image generation failed", err);
                alert("åœ–ç‰‡ä¸‹è¼‰å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚");
                document.body.style.cursor = 'default';
            });
        }

        function copyScenePrompt(btn) {
            const prompt = categorySettings[activeCategory].prompt;
            const textarea = document.createElement('textarea');
            textarea.value = prompt;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);

            const originalContent = btn.innerHTML;
            btn.innerHTML = `<i class="ph-bold ph-check"></i> <span>å·²è¤‡è£½è§’è‰²è¨­å®šï¼</span>`;
            setTimeout(() => { btn.innerHTML = originalContent; }, 2000);
        }

        // --- Init ---
        window.addEventListener('DOMContentLoaded', () => {
            renderNav();
            updateView();
        });

    </script>
</body>
</html>
